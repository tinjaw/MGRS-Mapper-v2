<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="icon" href="data:," />
    <title>INDEX TEST</title>
    <style>
      .container {
        height: 250px;
        width: 250px;
        border: 1px red solid;
        float: left;
        margin-right: 15px;
      }
      svg {
        overflow: visible;
        /* max-width: 100vw;
        max-height: 100vh; */
      }
      .demo-width-class {
        margin-top: 15px;
        width: 600px;
      }
      .symbol-list em {
        pointer-events: none;
        color: rgba(0, 0, 0, 0.38);
        font-style: italic;
      }
    </style>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet" />
  </head>
  <body>
    <div class="info">
      <h1>Testing Classes</h1>
      <ul>
        <li>Location to put SVG</li>
        <li>Which symbol to insert</li>
        <li>The selected affiliation of the symbol</li>
        <li>Unit Size</li>
        <li>Mod1</li>
        <li>Mod2</li>
        <li>Unique Designation Text</li>
        <li>Higher formation Text</li>
        <li>Reinforced or Reduced</li>
        <li>Task Force Amplifier</li>
        <li>Command Post Amplifier</li>
        <li>Activity conversion</li>
        <li>Installation conversion</li>
      </ul>
      <pre>
          equipment_friendlyTemplated: {
            d: '',
            cx: '100',
            cy: '100',
            r: '60',
            fill: 'rgb(128,224,255)',
            stroke: 'black',
            strokeWidth: '4',
            fill_2: 'none',
            stroke_2: 'rgb(239, 239, 239)',
            strokeWidth_2: '5',
            strokeDashArray_2: '4,4'
          }
      </pre>
    </div>

    <div class="container box1"></div>
    <div class="container box2"></div>
    <div class="container box3"></div>
    <div class="container box4"></div>
    <div class="container box5"></div>
    <div class="container box6"></div>

    <!-- Affiliation List -->
    <div class="mdc-layout-grid ">
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell--span-3">
          <div class="mdc-select  affiliation-select">
            <input type="hidden" name="enhanced-select" />
            <i class="mdc-select__dropdown-icon"></i>
            <div class="mdc-select__selected-text mainSymbolSelectedText"></div>
            <div class="mdc-select__menu mdc-menu mdc-menu-surface ">
              <ul class="mdc-list affiliation-list">
                <li class="mdc-list-item mdc-list-item--selected" data-value="friendly" aria-selected="true">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="21 46 158 108">
                      <path d="M25,50 l150,0 0,100 -150,0 z" stroke-width="5" stroke="black" fill="rgb(128,224,255)" fill-opacity="1"></path>
                    </svg>
                  </figure>
                  Friendly
                </li>
                <li class="mdc-list-item" data-value="friendlyTemplated">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="21 46 158 108">
                      <path d="M25,50 l150,0 0,100 -150,0 z" stroke-width="8" stroke="black" fill="rgb(128,224,255)" fill-opacity="1"></path>
                      <path d="M25,50 l150,0 0,100 -150,0 z" stroke-width="10" stroke-dasharray="8,8" stroke="rgb(239, 239, 239)" fill="none"></path>
                    </svg>
                  </figure>
                  Assumed Friendly
                </li>
                <li class="mdc-list-item" data-value="hostile">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="24 24 152 152">
                      <path d="M 100,28 L172,100 100,172 28,100 100,28 Z" stroke-width="5" stroke="black" fill="rgb(255,128,128)" fill-opacity="1"></path>
                    </svg>
                  </figure>
                  Hostile
                </li>
                <li class="mdc-list-item" data-value="hostileTemplated">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="24 24 152 152">
                      <path d="M 100,28 L172,100 100,172 28,100 100,28 Z" stroke-width="8" stroke="black" fill="rgb(255,128,128)" fill-opacity="1"></path>
                      <path d="M 100,28 L172,100 100,172 28,100 100,28 Z" stroke-width="10" stroke-dasharray="8,8" stroke="rgb(239, 239, 239)" fill="none"></path>
                    </svg>
                  </figure>
                  Suspect
                </li>
                <li class="mdc-list-item" data-value="unknown">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="26.75 26.75 146.5 146.5">
                      <path d="M63,63 C63,20 137,20 137,63 C180,63 180,137 137,137 C137,180 63,180 63,137 C20,137 20,63 63,63 Z" stroke-width="5" stroke="black" fill="rgb(255,255,128)" fill-opacity="1"></path>
                    </svg>
                  </figure>
                  Unknown
                </li>
                <li class="mdc-list-item" data-value="pending">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="26.75 26.75 146.5 146.5">
                      <path d="M63,63 C63,20 137,20 137,63 C180,63 180,137 137,137 C137,180 63,180 63,137 C20,137 20,63 63,63 Z" stroke-width="8" stroke="black" fill="rgb(255,255,128)" fill-opacity="1"></path>
                      <path d="M63,63 C63,20 137,20 137,63 C180,63 180,137 137,137 C137,180 63,180 63,137 C20,137 20,63 63,63 Z" stroke-width="10" stroke-dasharray="8,8" stroke="rgb(239, 239, 239)" fill="none"></path>
                    </svg>
                  </figure>
                  Pending
                </li>
                <li class="mdc-list-item" data-value="neutral">
                  <figure>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="63" height="43" viewBox="41 41 118 118">
                      <path d="M45,45 l110,0 0,110 -110,0 z" stroke-width="5" stroke="black" fill="rgb(170,255,170)" fill-opacity="1"></path>
                    </svg>
                  </figure>
                  Neutral
                </li>
              </ul>
            </div>
            <span class="mdc-floating-label">Select an Affiliation</span>
            <div class="mdc-line-ripple"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- SELECT UNIT -->
    <div class="mdc-select select-unit demo-width-class">
      <input type="hidden" name="enhanced-select" />
      <i class="mdc-select__dropdown-icon"></i>
      <div class="mdc-select__selected-text"></div>
      <div class="mdc-select__menu mdc-menu mdc-menu-surface demo-width-class">
        <ul class="mdc-list symbol-list"></ul>
      </div>
      <span class="mdc-floating-label">Select Symbol</span>
      <div class="mdc-line-ripple"></div>
    </div>

    <script>
      // * ADD SYMBOL THUMBNAILS TO THE DROPDOWN LIST * //
      const addSymbolsToDropdownList = () =>
        Object.keys(militarySymbolsObject).forEach(key => {
          const mdcList = document.querySelector('.mdc-list.symbol-list');
          // Prepend the symbol TYPE information to the list (eg- "Land Unit...")
          const symbolTypeInfo = document.createElement('em');
          symbolTypeInfo.setAttribute('class', 'symbol-type-info');
          symbolTypeInfo.textContent = militarySymbolsObject[key].type.padEnd(15, '.');
          // Append the symbol DESCRIPTION to the list (eg- "Infantry")
          const newli = document.createElement('li');
          newli.setAttribute('class', 'mdc-list-item');
          newli.setAttributeNS(null, 'data-value', key);
          newli.textContent = key.toString();
          newli.prepend(symbolTypeInfo);
          mdcList.append(newli);
          const figureElement = document.createElement('figure');
          figureElement.setAttribute('class', 'symbolFigure');
          figureElement.setAttribute('data-symbol-name', `${key}`); // add the symbol key to the data-attr so they can match up with the list item
          newli.prepend(figureElement);
          //This will add the icons to the dropdown list
          new MilSym(`.symbolFigure[data-symbol-name="${key}"]`, `${key}`, `${selectAffiliation.value}`, 'none').placeSymbol();
        });

      // * MILITARY SYMBOLS OBJECT * //
      const militarySymbolsObject = {
        'Default Land Unit': {
          type: 'Land Unit',
          affiliation: {
            friendly: {
              path_1: {
                d: ''
              }
            },
            get friendlyTemplated() {
              return this.friendly;
            },
            get hostile() {
              return this.friendly;
            },
            get hostileTemplated() {
              return this.friendly;
            },
            get unknown() {
              return this.friendly;
            },
            get pending() {
              return this.friendly;
            },
            get neutral() {
              return this.friendly;
            }
          }
        },
        'CBRN Chemical Recon': {
          type: 'Land Unit',
          affiliation: {
            friendly: {
              path_1: {
                d: 'm 80,120 c 0,-20 10,-32 50,-35 m -10,35 C 120,100 110,88 70,85',
                fill: 'none'
              },
              path_2: {
                d: 'M25,150L175,50'
              },
              circle_1: {
                cx: '75',
                cy: '90',
                r: '6'
              },
              circle_2: {
                cx: '125',
                cy: '90',
                r: '6'
              },
              text: {
                symbolText: 'C',
                x: '100',
                y: '77',
                textAnchor: 'middle',
                fontSize: '30'
              }
            },
            get friendlyTemplated() {
              return this.friendly;
            },
            get hostile() {
              const propertyToModify = {
                path_2: {
                  d: 'M65,137L137,65',
                  fill: 'none'
                }
              };
              // There has to be a better way to do this instead of spamming this const in every affiliation...
              const modifiedTarget = Object.assign({}, this.friendly, propertyToModify);
              return modifiedTarget;
            },
            get hostileTemplated() {
              return this.hostile;
            },
            get unknown() {
              const propertyToModify = {
                path_2: {
                  d: 'M50,135L150,65',
                  fill: 'none'
                }
              };
              const modifiedTarget = Object.assign({}, this.friendly, propertyToModify);
              return modifiedTarget;
            },
            get pending() {
              return this.unknown;
            },
            get neutral() {
              // https://stackoverflow.com/questions/37932434/how-to-change-a-property-on-an-object-without-mutating-it
              const propertyToModify = {
                path_2: {
                  d: 'M45,155L155,45',
                  fill: 'none'
                }
              };
              // So basically all modifiedTarget does is copy the properties of the friendly key. propertyToModify then edits the path_2 key with new data
              const modifiedTarget = Object.assign({}, this.friendly, propertyToModify);
              return modifiedTarget;
            }
          }
        },
        Infantry: {
          type: 'Land Unit',
          affiliation: {
            friendly: {
              path: {
                d: 'M25,50 L175,150 M25,150 L175,50'
              }
            },
            get friendlyTemplated() {
              return this.friendly;
            },
            hostile: {
              path: {
                d: 'M65,65 L137,137 M65, 137 L137, 65'
              }
            },
            get hostileTemplated() {
              return this.hostile;
            },
            unknown: {
              path: {
                d: 'M50,65L150,135M50,135L150,65'
              }
            },
            get pending() {
              return this.unknown;
            },
            neutral: {
              path: {
                d: 'M45,45L155,155M45,155L155,45'
              }
            }
          }
        },
        'Unammed Aerial Surveillance': {
          type: 'Land Unit',
          affiliation: {
            friendly: {
              path: {
                d: 'm 60,84 40,20 40,-20 0,8 -40,25 -40,-25 z'
              }
            },
            get friendlyTemplated() {
              return this.friendly;
            },
            get hostile() {
              return this.friendly;
            },
            get hostileTemplated() {
              return this.friendly;
            },
            get unknown() {
              return this.friendly;
            },
            get pending() {
              return this.friendly;
            },
            get neutral() {
              return this.friendly;
            }
          }
        },
        'Air Defense Artillery (Radar Dome)': {
          type: 'Land Unit',
          affiliation: {
            friendly: {
              path: {
                d: 'M25,150 C25,110 175,110 175,150',
                fill: 'none'
              }
            },
            get friendlyTemplated() {
              return this.friendly;
            },
            hostile: {
              path: {
                d: 'M70,142 C70,115 130,115 130,142',
                fill: 'none'
              }
            },
            get hostileTemplated() {
              return this.hostile;
            },
            unknown: {
              path: {
                d: 'm 55,135 c 10,-20 80,-20 90,0',
                fill: 'none'
              }
            },
            get pending() {
              return this.unknown;
            },
            neutral: {
              path: {
                d: 'M45,150 C45,110 155,110 155,150',
                fill: 'none'
              }
            }
          }
        },
        'Weapon System - Grenade Launcher - Medium': {
          type: 'Equipment',
          affiliation: {
            friendly: {
              path_1: {
                d: 'm 100,60 0,80 M 85,75 100,60 115,75',
                fill: 'none'
              },
              circle_2: {
                cx: '100',
                cy: '90',
                r: '15',
                fill: 'none'
              },
              path_2: {
                d: 'm 85,125 30,0 m -30,-10 30,0',
                fill: 'none'
              }
            },
            get friendlyTemplated() {
              return this.friendly;
            },
            get hostile() {
              return this.friendly;
            },
            get hostileTemplated() {
              return this.friendly;
            },
            get unknown() {
              return this.friendly;
            },
            get pending() {
              return this.friendly;
            },
            get neutral() {
              return this.friendly;
            }
          }
        }
      };

      // * UNIT AFFILIATION OBJECT * //
      const affiliationOutlineObject = {
        friendly: {
          templated: false,
          d: 'M25,50 l150,0 0,100 -150,0 z',
          fill: 'rgb(128,224,255)'
        },
        friendlyTemplated: {
          templated: true,
          d: 'M25,50 l150,0 0,100 -150,0 z',
          fill: 'rgb(128,224,255)',
          fill_2: 'none',
          stroke_2: 'rgb(239, 239, 239)',
          strokeWidth_2: '5',
          strokeDashArray_2: '4,4'
        },
        hostile: {
          templated: false,
          d: 'M 100,28 L172,100 100,172 28,100 100,28 Z',
          fill: 'rgb(255,128,128)'
        },
        hostileTemplated: {
          templated: true,
          d: 'M 100,28 L172,100 100,172 28,100 100,28 Z',
          fill: 'rgb(255,128,128)',
          fill_2: 'none',
          stroke_2: 'rgb(239, 239, 239)',
          strokeWidth_2: '5',
          strokeDashArray_2: '4,4'
        },
        unknown: {
          templated: false,
          d: 'M63,63 C63,20 137,20 137,63 C180,63 180,137 137,137 C137,180 63,180 63,137 C20,137 20,63 63,63 Z',
          fill: 'rgb(255,255,128)'
        },
        pending: {
          templated: true,
          d: 'M63,63 C63,20 137,20 137,63 C180,63 180,137 137,137 C137,180 63,180 63,137 C20,137 20,63 63,63 Z',
          fill: 'rgb(255,255,128)',
          fill_2: 'none',
          stroke_2: 'rgb(239, 239, 239)',
          strokeWidth_2: '5',
          strokeDashArray_2: '4,4'
        },
        neutral: {
          templated: false,
          d: 'M45,45 l110,0 0,110 -110,0 z',
          fill: 'rgb(170, 255, 170)'
        },
        equipment_friendly: {
          templated: false,
          d: '',
          cx: '100',
          cy: '100',
          r: '60',
          fill: 'rgb(128,224,255)',
          stroke: 'black',
          strokeWidth: '4'
        },
        equipment_friendlyTemplated: {
          d: '',
          cx: '100',
          cy: '100',
          r: '60',
          fill: 'rgb(128,224,255)',
          stroke: 'black',
          strokeWidth: '4',
          fill_2: 'none',
          stroke_2: 'rgb(239, 239, 239)',
          strokeWidth_2: '5',
          strokeDashArray_2: '4,4'
        }
      };

      // * UNIT SIZE OBJECT * //
      const unitSizeObject = {
        none: {
          friendly: {
            d: ''
          },
          get friendlyTemplated() {
            return this.friendly;
          },
          get hostile() {
            return this.friendly;
          },
          get hostileTemplated() {
            return this.friendly;
          },
          get unknown() {
            return this.friendly;
          },
          get pending() {
            return this.friendly;
          },
          get neutral() {
            return this.friendly;
          }
        },
        team: {
          friendly: {
            d: 'M85,30a15,15 0 1,0 30,0a15,15 0 1,0 -30,0 M80,40L120,20',
            fill: 'none'
          },
          get friendlyTemplated() {
            return this.friendly;
          },
          hostile: {
            d: 'M85,8a15,15 0 1,0 30,0a15,15 0 1,0 -30,0 M80,18L120,-2',
            fill: 'none'
          },
          get hostileTemplated() {
            return this.hostile;
          },
          get unknown() {
            return this.hostile;
          },
          get pending() {
            return this.hostile;
          },
          neutral: {
            d: 'M85,25a15,15 0 1,0 30,0a15,15 0 1,0 -30,0 M80,35L120,15',
            fill: 'none'
          }
        },
        squad: {
          friendly: {
            d: 'M92.5,30a7.5,7.5 0 1,0 15,0a7.5,7.5 0 1,0 -15,0'
          },
          get friendlyTemplated() {
            return this.friendly;
          },
          hostile: {
            d: 'M92.5,8a7.5,7.5 0 1,0 15,0a7.5,7.5 0 1,0 -15,0'
          },
          get hostileTemplated() {
            return this.hostile;
          },
          get unknown() {
            return this.hostile;
          },
          get pending() {
            return this.hostile;
          },
          neutral: {
            d: 'M92.5,25a7.5,7.5 0 1,0 15,0a7.5,7.5 0 1,0 -15,0'
          }
        },
        region: {
          friendly: {
            d: 'M0,40l25,-25m0,25l-25,-25M35,40l25,-25m0,25l-25,-25M70,40l25,-25m0,25l-25,-25M105,40l25,-25m0,25l-25,-25M140,40l25,-25m0,25l-25,-25M175,40l25,-25m0,25l-25,-25'
          },
          get friendlyTemplated() {
            return this.friendly;
          },
          hostile: {
            d: 'M0,18l25,-25m0,25l-25,-25M35,18l25,-25m0,25l-25,-25M70,18l25,-25m0,25l-25,-25M105,18l25,-25m0,25l-25,-25M140,18l25,-25m0,25l-25,-25M175,18l25,-25m0,25l-25,-25'
          },
          get hostileTemplated() {
            return this.hostile;
          },
          get unknown() {
            return this.hostile;
          },
          get pending() {
            return this.hostile;
          },
          neutral: {
            d: 'M0,35l25,-25m0,25l-25,-25M35,35l25,-25m0,25l-25,-25M70,35l25,-25m0,25l-25,-25M105,35l25,-25m0,25l-25,-25M140,35l25,-25m0,25l-25,-25M175,35l25,-25m0,25l-25,-25'
          }
        }
      };

      class MilSym {
        constructor(location, symbol, affiliation, echelon) {
          this.location = document.querySelector(location);
          this.symbol = militarySymbolsObject[symbol].affiliation[affiliation];
          this.affiliation = affiliationOutlineObject[affiliation];
          this.echelon = unitSizeObject[echelon][affiliation];
          this.type = militarySymbolsObject[symbol].type;
          this.data = {
            location,
            symbol,
            affiliation,
            echelon
          };
        }

        placeSymbol() {
          this.location.querySelector('svg') ? this.location.querySelector('svg').remove() : null;
          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
          // This will find any symbols that have nothing in the echelon path data. You can use this later to exclude them from being inserted into the DOM
          //console.dir(this.echelonData.firstChild.attributes['d'].textContent.length);

          svg.append(this.affiliationOutlineData, this.decoratorData, this.echelonData);
          this.location.append(svg);
          svg.setAttributeNS(null, 'data-symbol-name', this.data.symbol);
          svg.setAttributeNS(null, 'data-symbol-info', JSON.stringify(this.data)); //this should probably be split into separate data-attrs
          svg.setAttributeNS(null, 'height', `${svg.getBBox().height}`);
          svg.setAttributeNS(null, 'width', `${svg.getBBox().width}`);
          svg.setAttributeNS(null, 'preserveAspectRatio', 'xMidYMid');
          svg.setAttributeNS(null, 'viewBox', `${svg.getBBox().x - 4} ${svg.getBBox().y - 4} ${svg.getBBox().width + 8} ${svg.getBBox().height + 8}`);
        }

        get affiliationOutlineData() {
          const outlineGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
          outlineGroup.setAttributeNS(null, 'class', 'outline');
          const outline = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          outline.setAttributeNS(null, 'stroke', 'black');
          outline.setAttributeNS(null, 'stroke-width', '4');
          const outlineTemplated = document.createElementNS('http://www.w3.org/2000/svg', 'path');

          const generateOutline = () =>
            Object.keys(this.affiliation).forEach(key => {
              const value = this.affiliation[key];
              //console.log(key, value);
              if (key.indexOf('templated') === 0 && value === true) {
                outline.setAttributeNS(null, 'd', `${this.affiliation['d']}`);
                outline.setAttributeNS(null, 'fill', `${this.affiliation['fill']}`);
                outlineTemplated.setAttributeNS(null, 'd', `${this.affiliation['d']}`);
                outlineTemplated.setAttributeNS(null, 'fill', `${this.affiliation['fill_2']}`);
                outlineTemplated.setAttributeNS(null, 'stroke', `${this.affiliation['stroke_2']}`);
                outlineTemplated.setAttributeNS(null, 'stroke-width', `${this.affiliation['strokeWidth_2']}`);
                outlineTemplated.setAttributeNS(null, 'stroke-dasharray', `${this.affiliation['strokeDashArray_2']}`);
                // Had to put this in an async function because the templated outline was popping up ahead of the regular outline
                (async () => {
                  await outlineGroup.append(outlineTemplated);
                  outlineGroup.prepend(outline);
                })().catch(err => {
                  console.error(err);
                });
              } else {
                outline.setAttributeNS(null, 'd', `${this.affiliation['d']}`);
                outline.setAttributeNS(null, 'fill', `${this.affiliation['fill']}`);
                outlineGroup.append(outline);
              }
            });

          // Check if the symbol is a piece of equipment
          switch (this.type) {
            case 'Equipment':
              //If the symbol is a friendly piece of equipment, then we need to adjust the outline
              switch (selectAffiliation.value) {
                case 'friendly':
                  const outline0 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                  outline0.setAttributeNS(null, 'cx', '100');
                  outline0.setAttributeNS(null, 'cy', '100');
                  outline0.setAttributeNS(null, 'r', '60');
                  outline0.setAttributeNS(null, 'fill', 'rgb(128,224,255)');
                  outline0.setAttributeNS(null, 'stroke', 'black');
                  outline0.setAttributeNS(null, 'stroke-width', '4');
                  outlineGroup.append(outline0);
                  break;
                case 'friendlyTemplated':
                  const outline1 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                  outline1.setAttributeNS(null, 'cx', '100');
                  outline1.setAttributeNS(null, 'cy', '100');
                  outline1.setAttributeNS(null, 'r', '60');
                  outline1.setAttributeNS(null, 'fill', 'rgb(128,224,255)');
                  outline1.setAttributeNS(null, 'stroke', 'black');
                  outline1.setAttributeNS(null, 'stroke-width', '4');
                  const outline2 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                  outline2.setAttributeNS(null, 'cx', '100');
                  outline2.setAttributeNS(null, 'cy', '100');
                  outline2.setAttributeNS(null, 'r', '60');
                  outline2.setAttributeNS(null, 'fill', 'none');
                  outline2.setAttributeNS(null, 'stroke', 'rgb(239, 239, 239)');
                  outline2.setAttributeNS(null, 'stroke-width', '5');
                  outline2.setAttributeNS(null, 'stroke-dasharray', '4,4');
                  outlineGroup.append(outline1, outline2);
                  break;
                default:
                  // If the equipment is anything BUT friendly, we can use the normal outlines for Land Units.
                  generateOutline();
                  break;
              }
              break;
            default:
              generateOutline();
              break;
          }

          // if (this.type === 'Equipment') {
          //   if (selectAffiliation.value === 'friendly') {
          //     this.affiliation = affiliationOutlineObject.equipment_friendly;
          //     const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          //     circle.setAttributeNS(null, 'cx', `${this.affiliation.cx}`);
          //     circle.setAttributeNS(null, 'cy', `${this.affiliation.cy}`);
          //     circle.setAttributeNS(null, 'r', `${this.affiliation.r}`);
          //     circle.setAttributeNS(null, 'fill', `${this.affiliation.fill}`);
          //     circle.setAttributeNS(null, 'stroke', `${this.affiliation.stroke}`);
          //     circle.setAttributeNS(null, 'stroke-width', `${this.affiliation.strokeWidth}`);
          //     outlineGroup.append(circle);
          //   }
          // }
          //   Object.keys(this.affiliation).forEach(key => {
          //     const value = this.affiliation[key];
          //     //console.log(key, value);
          //     if (key.indexOf('templated') === 0 && value === true) {
          //       outline.setAttributeNS(null, 'd', `${this.affiliation['d']}`);
          //       outline.setAttributeNS(null, 'fill', `${this.affiliation['fill']}`);
          //       outlineTemplated.setAttributeNS(null, 'd', `${this.affiliation['d']}`);
          //       outlineTemplated.setAttributeNS(null, 'fill', `${this.affiliation['fill_2']}`);
          //       outlineTemplated.setAttributeNS(null, 'stroke', `${this.affiliation['stroke_2']}`);
          //       outlineTemplated.setAttributeNS(null, 'stroke-width', `${this.affiliation['strokeWidth_2']}`);
          //       outlineTemplated.setAttributeNS(null, 'stroke-dasharray', `${this.affiliation['strokeDashArray_2']}`);
          //       // Had to put this in an async function because the templated outline was popping up ahead of the regular outline
          //       (async () => {
          //         await outlineGroup.append(outlineTemplated);
          //         outlineGroup.prepend(outline);
          //       })().catch(err => {
          //         console.error(err);
          //       });
          //     } else {
          //       outline.setAttributeNS(null, 'd', `${this.affiliation['d']}`);
          //       outline.setAttributeNS(null, 'fill', `${this.affiliation['fill']}`);
          //       outlineGroup.append(outline);
          //     }
          //   });

          return outlineGroup;
        }
        get decoratorData() {
          const decoratorGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
          decoratorGroup.classList.add('decorator');
          Object.keys(this.symbol).forEach(key => {
            if (key.indexOf('path') === 0) {
              const element = this.symbol[key];
              const decorator = document.createElementNS('http://www.w3.org/2000/svg', 'path');
              decorator.setAttributeNS(null, 'd', `${element.d}`);
              // If the default decorator fill is missing, default to black
              if (!element.fill) {
                decorator.setAttributeNS(null, 'fill', 'black');
              } else {
                decorator.setAttributeNS(null, 'fill', `${element.fill}`);
              }
              // If the default decorator stroke is missing, default to black
              if (!element.stroke) {
                decorator.setAttributeNS(null, 'stroke', 'black');
              } else {
                decorator.setAttributeNS(null, 'stroke', `${element.stroke}`);
              }
              // If the default decorator stroke-width is missing, default to 4
              if (!element.strokeWidth) {
                decorator.setAttributeNS(null, 'stroke-width', '4');
              } else {
                decorator.setAttributeNS(null, 'stroke-width', `${element.strokeWidth}`);
              }
              decoratorGroup.append(decorator);
            }
            if (key.indexOf('circle') == 0) {
              const element = this.symbol[key];
              const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
              circle.setAttributeNS(null, 'cx', `${element.cx}`);
              circle.setAttributeNS(null, 'cy', `${element.cy}`);
              circle.setAttributeNS(null, 'r', `${element.r}`);
              // Default circle decorator stroke to black
              if (!element.stroke) {
                circle.setAttributeNS(null, 'stroke', 'black');
              } else {
                circle.setAttributeNS(null, 'stroke', `${element.stroke}`);
              }
              // Default circle decorator stroke width to 4
              if (!element.strokeWidth) {
                circle.setAttributeNS(null, 'stroke-width', '4');
              } else {
                circle.setAttributeNS(null, 'stroke-width', `${element.strokeWidth}`);
              }
              // Default circle decorator fill to black
              if (!element.fill) {
                circle.setAttributeNS(null, 'fill', 'black');
              } else {
                circle.setAttributeNS(null, 'fill', `${element.fill}`);
              }
              decoratorGroup.append(circle);
            }
            if (key.indexOf('text') == 0) {
              const element = this.symbol[key];
              const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
              text.textContent = element.symbolText;
              text.setAttributeNS(null, 'x', `${element.x}`);
              text.setAttributeNS(null, 'y', `${element.y}`);
              text.setAttributeNS(null, 'text-anchor', `${element.textAnchor}`);
              text.setAttributeNS(null, 'font-size', `${element.fontSize}`);
              // Default decorator font family to Arial
              if (!element.fontFamily) {
                text.setAttributeNS(null, 'font-family', 'Arial');
              } else {
                text.setAttributeNS(null, 'font-family', `${element.fontFamily}`);
              }
              // Default decorator font weight to 30
              if (!element.fontWeight) {
                text.setAttributeNS(null, 'font-weight', '30');
              } else {
                text.setAttributeNS(null, 'font-weight', `${element.fontWeight}`);
              }
              // Default decorator font stroke to none
              if (!element.stroke) {
                text.setAttributeNS(null, 'stroke', 'none');
              } else {
                text.setAttributeNS(null, 'stroke', `${element.stroke}`);
              }
              // Default decorator font stroke width to 4
              if (!element.strokeWidth) {
                text.setAttributeNS(null, 'stroke-width', '4');
              } else {
                text.setAttributeNS(null, 'stroke-width', `${element.strokeWidth}`);
              }
              // Default decorator font fill to black
              if (!element.fill) {
                text.setAttributeNS(null, 'fill', 'black');
              } else {
                text.setAttributeNS(null, 'fill', `${element.fill}`);
              }
              decoratorGroup.append(text);
            }
          });
          return decoratorGroup;
        }
        get echelonData() {
          const echelonGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
          echelonGroup.setAttributeNS(null, 'class', 'echelon');
          const element = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          element.setAttributeNS(null, 'd', `${this.echelon.d}`);
          element.setAttributeNS(null, 'fill', 'black');
          element.setAttributeNS(null, 'stroke', 'black');
          element.setAttributeNS(null, 'stroke-width', '4');

          Object.keys(this.echelon).forEach(key => {
            element.setAttributeNS(null, 'fill', `${this.echelon['fill']}`);
          });

          echelonGroup.append(element);
          return echelonGroup;
        }

        set updateEchelon(value) {
          this.echelon = unitSizeObject[value].hostile;
        }
      }

      // function placeLotsOfSymbols(container) {
      //   this.container = document.querySelectorAll(container);
      //   const symbolArray = Array.from(Object.keys(militarySymbolsObject));
      //   const affiliationArray = Array.from(Object.keys(affiliationOutlineObject));
      //   //const echelonArray = Array.from(Object.keys(unitSizeObject));
      //   document.querySelectorAll(container).forEach((e, i) => {
      //     new MilSym(`.${e.classList[1]}`, `${symbolArray[i]}`, `${affiliationArray[i]}`, `squad`).placeSymbol();
      //   });
      // }

      // Loads Material Design
      window.onload = () => {
        const selectAffiliation = mdc.select.MDCSelect.attachTo(document.querySelector('.mdc-select.affiliation-select'));
        selectAffiliation.listen('MDCSelect:change', () => {
          new MilSym('.box1', `${selectSymbol.value}`, `${selectAffiliation.value}`, 'squad').placeSymbol();
          Object.keys(militarySymbolsObject).forEach(key => {
            new MilSym(`.symbolFigure[data-symbol-name="${key}"]`, `${key}`, `${selectAffiliation.value}`, 'none').placeSymbol();
          });
        });
        window.selectAffiliation = selectAffiliation;

        const selectSymbol = mdc.select.MDCSelect.attachTo(document.querySelector('.mdc-select.select-unit'));
        selectSymbol.listen('MDCSelect:change', () => {
          selectSymbol.selectedText_.textContent = selectSymbol.value;
          new MilSym('.box1', `${selectSymbol.value}`, `${selectAffiliation.value}`, 'squad').placeSymbol();
        });
        window.selectSymbol = selectSymbol;

        addSymbolsToDropdownList();
        selectSymbol.foundation_.setSelectedIndex(0);

        const selectMenus = document.querySelectorAll('.mdc-select');
        for (const iterator of selectMenus) {
          iterator.addEventListener('click', () => {
            //If the selectSymbol menu is open, then resize the icons
            selectSymbol.foundation_.adapter_.isMenuOpen() ? resize('.symbolFigure svg') : null;
          });
        }

        const mso = new MilSym('.box1', `${selectSymbol.value}`, `${selectAffiliation.value}`, 'squad');
        mso.placeSymbol();
      };

      //ex- resize('.symbolFigure svg');  (default parameters set for thumbnails)
      function resize(symbolElement, width = 63, height = 43) {
        this.symbolElement = document.querySelectorAll(symbolElement);
        this.width = width;
        this.height = height;

        this.symbolElement.forEach(key => {
          // This just removes the animation on the symbol on the dropdown list
          //key.classList.contains('animateSymbol') ? key.classList.remove('animateSymbol') : null;
          key.setAttributeNS(null, 'preserveAspectRatio', 'xMidYMid'); //this is a default value I believe
          key.setAttributeNS(null, 'viewBox', `${key.getBBox().x - 4} ${key.getBBox().y - 4} ${key.getBBox().width + 8} ${key.getBBox().height + 8}`);
          //key.setAttributeNS(null, 'viewBox', '24 24 152 152');
          key.setAttributeNS(null, 'width', `${this.width}`);
          key.setAttributeNS(null, 'height', `${this.height}`);
        });
      }

      // ! TODO:
      // 0- Add in the Affiliation icons to the dropdown
      // 1- Add in the echelon dropdown
      // 2- Ditch the CDN and use imports
      // 4- Equipment icon needs to be configured as a circle
      // 5- There is an issue that might need to be addressed in the future. 3 groups so far are automatically being appended - outline, decorator and echelon. This ins't so bad since Outline/Decorator are pretty much mandatory but echelon gets appended even if there is no echelon selected.
    </script>
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  </body>
</html>
